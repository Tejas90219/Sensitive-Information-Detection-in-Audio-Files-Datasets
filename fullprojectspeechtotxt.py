# -*- coding: utf-8 -*-
"""fullprojectspeechtotxt.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1n3s31MXKwEnX5mFm2dr5xIl4J4sy_11a
"""

!pip install git+https://github.com/openai/whisper.git

!sudo apt update && sudo apt install ffmpeg

pip install -U openai-whisper

import os
import whisper
model = whisper.load_model("turbo")

audio_files=[
"/content/machine-learning_speech-recognition_16-122828-0002.wav",
"/content/2902-9008-0000.flac",
"/content/2902-9008-0003.flac",
"/content/2902-9008-0002.flac",
"/content/2902-9008-0006.flac",
"/content/sensitiveaudio_selfreco.m4a"
]

Trancriptions = []
for file_path in audio_files:
    result = model.transcribe(file_path)
    print(f"Transcription for {file_path}:")
    Trancriptions.append(result["text"])
    print(result["text"])
    print("-" * 20)

Trancriptions

import whisper

def transcribe_audio(file_path):
    model = whisper.load_model("base")
    result = model.transcribe(file_path)
    return result["text"]

audio_text = []
for file_path in audio_files:
    transcription = transcribe_audio(file_path)
    audio_text.append(transcription)

print("Transcriptions:", audio_text)

import re

def detect_sensitive_info(audio_text):
    patterns = {
        "Phone Number": r"\b\d{10}\b",
        "OTP": r"\b\d{4,6}\b",
        "Age": r"\b\d{1,2} years old\b",
        "Gender": r"\b(male|female|other|non-binary)\b",
        "Address": r"\b\d{1,5}\s\w+\s(?:Street|Avenue|Road|Lane)\b",
        "Health Issue": r"\b(diabetes|asthma|heart disease|cancer)\b",
        "Password": r"\b(password is|my password is)\s+\w+"
    }

for text_item in audio_text:
    sensitive_info = detect_sensitive_info(text_item)
    if sensitive_info:
        sensitive_info[text_item] = sensitive_info
print("Sensitive Information Detected:", sensitive_info)

def highlight_sensitive_info_terminal(text, sensitive_info):
  for text_item in audio_text:
    sensitive_info = detect_sensitive_info(text_item)
    if sensitive_info:
        sensitive_info[text_item] = sensitive_info


print("highlighted text:", sensitive_info)

